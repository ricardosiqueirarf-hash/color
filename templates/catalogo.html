<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catálogo de Perfis</title>
<style>
body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:20px; }
h1 { margin-bottom:20px; }
.catalogo { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; }
.card { background:white; padding:15px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,.1); }
.card img { width:100%; height:150px; object-fit:cover; border-radius:8px; margin-bottom:10px; }
.card h3 { margin-top:0; }
.perfil-info { margin:8px 0; font-size:0.9rem; }
.cores { display:flex; gap:5px; margin-top:5px; }
.cor { width:20px; height:20px; border-radius:50%; border:1px solid #ccc; }
.cor.preto { background:#000; }
.cor.prata { background:#c6c7c9; }
.cor.bronze1001 { background:#716859; }
.cor.dourado { background:#B89C5D; }
.cor.inox {background:#918B82; }
</style>
</head>
<body>

<h1>Catálogo de Perfis de Alumínio</h1>
<div class="catalogo" id="catalogo">Carregando...</div>

<script>
// =====================
// URL do backend no Render
// =====================
const BACKEND_URL = "https://colorglass.onrender.com";

// =====================
// Buscar dados do backend
// =====================
async function fetchPerfis() {
    try {
        const res = await fetch(`${BACKEND_URL}/api/perfis`);
        if (!res.ok) throw new Error("Erro ao buscar perfis");
        const data = await res.json();
        return data.perfis || [];
    } catch (err) {
        console.error(err);
        return [];
    }
}

// =====================
// Renderizar catálogo
// =====================
const nomesCores = {
    preto: "Preto",
    prata: "Prata",
    bronze1001: "Bronze",
    dourado: "Dourado",
    inox: "Inox"
};

async function renderCatalogo() {
    const perfis = await fetchPerfis();
    const container = document.getElementById("catalogo");
    container.innerHTML = "";

    if (perfis.length === 0) {
        container.innerHTML = "<em>Nenhum perfil encontrado.</em>";
        return;
    }

    perfis.forEach(p => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
            <img src="${BACKEND_URL}/static/${p.imagem}" alt="${p.nome}">
            <h3>${p.nome}</h3>
            <div class="perfil-info"><strong>Para:</strong> ${p.tipologias.join(", ")}</div>
            <div class="perfil-info"><strong>Descrição:</strong> ${p.descricao}</div>
            <div class="perfil-info"><strong>Cores disponíveis:</strong></div>
            <div class="cores">
                ${p.cores.map(c => `<div class="cor ${c}" title="${nomesCores[c] || c}"></div>`).join("")}
            </div>
        `;
        container.appendChild(card);
    });
}

renderCatalogo();
</script>
</body>
</html>

